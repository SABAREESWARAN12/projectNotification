<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Task</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <script defer th:src="@{/js/dashboard.js}"></script> <!-- Link JS file -->

</head>
<body>
<div class="container mt-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Task List</h2>
        <span class="badge bg-primary fs-5">Welcome, <span th:text="${applicant.username}"></span>!</span>

        <span class="btn btn-danger" th:href="@{/logout}">Log Out</span>
    </div>

    <form id="taskForm" class="mb-4" >
        <div class="row">
            <div class="col-md-3">
                <button type="submit" class="btn btn-success w-100">Add Task</button>
            </div>
        </div>
    </form>

    <table class="table table-hover">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Description</th>
            <th>Status</th>
            <th>Action</th>
            <th>Notification</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="task : ${task}">
            <td th:text="${task.taskName}"></td>
            <td th:text="${task.taskSubject}"></td>
            <td>
                        <span th:text="${task.taskStatus}"
                              th:classappend="${task.taskStatus == 'Completed' ? 'status-completed' :
                                               (task.taskStatus == 'In Progress' ? 'status-progress' : 'status-pending')}">
                        </span>
            </td>
            <td>
                <a th:href="@{/tasks/edit/{id}(id=${task.taskName})}" class="btn btn-primary btn-sm">
                    Edit
                </a>
                <a th:href="@{/tasks/remove/{id}(id=${task.taskName})}" class="btn btn-danger btn-sm">
                    Remove
                </a>
                <a th:href="@{/tasks/view/{id}(id=${task.taskName})}" class="btn btn-secondary btn-sm">
                    Remove
                </a>
            </td>
            <td>
                        <button th:text="${task.isEnabledNotification == 'True' ? 'Disable' : 'Enable'}"
                                th:class="${task.isEnabledNotification == 'True' ? 'btn btn-dark' : 'btn btn-success'}"
                                type="notification" id="notify"
                        >
                        </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
